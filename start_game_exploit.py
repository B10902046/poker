import json
from game.game import setup_config, start_poker

#from agents.exploit import setup_ai as exploit_ai
from agents.exploit_player import setup_ai as exploit_ai

from baseline4 import setup_ai as baseline4_ai

config = setup_config(max_round=20, initial_stack=1000, small_blind_amount=5)
config.register_player(name="ta", algorithm=baseline4_ai())
config.register_player(name="me", algorithm=exploit_ai())
win = 0
for _ in range(100):
    config = setup_config(max_round=20, initial_stack=1000, small_blind_amount=5)
    config.register_player(name="ta", algorithm=baseline4_ai())
    config.register_player(name="me", algorithm=exploit_ai())
    game_result = start_poker(config, verbose=1)
    if game_result["players"][0]["stack"] < game_result["players"][1]["stack"]:
        win += 1
print(f"win: {win}")
print(json.dumps(game_result, indent=4))
